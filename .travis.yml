language: node_js
node_js:
    - "8"
before_install:
    - npm config set //registry.npmjs.org/:_authToken=$NPM_TOKEN
branches:
    only:
        - master
notifications:
    email:
        on_success: change
        on_failure: always
script:
    - yarn test
    - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH;
      else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
    - node ./.travis_scripts/snapshot.js
env:
    global:
        - GIT_PROJECT_NAME="ironweb"
        # $NPM_TOKEN Allows publishing to NPM on build
        - secure: CiWRN2pZ7aGPY80QzNP6G149aZfRxcu8MzYItFn3WVH4AQcCz60VIG8m8qXvC0iORxGbSPbI7IuQVrMg0QbxyhOT/ywMT4sCrHRV3LCiykcgresNmm50E+fIgVP50rUaU302xIzQqi+qnCa9/vHyPkO7azHSZ6G9YmP1SCpi4fTrP5+gZFj7ZyVzdTN1eHCI0usCa6KFIUcI23l8x3r+kGMfZLCUYkvM/3darwzzzx1Y9Yvl6r3xaRaq2edBz9s8q4jsK+yNzRs8m+4EqA9yZw/7TX4JbrSWXJaGJgcRavfeXjOq303Dik9zX/K3fZJChMmdJ2JneX41VSSO1AWLjemsBvdwrDpY4zI2w5s/hjXSrcWlkEk/Gv26YpA/kYi5M/OdQRu8ON9LMBzwfk5tHnGKJH2bMKu3MpBsbVlQVgTeDse88z9oWFC2T5iWnrCdHPwwdEr85jNA2VOJezV8OOWJwd3LSVxHc1fKLSwMDINmSlUQC2mFwbEugl6jZo4YcgX7R7k2EhCKQQ9St/nSiBNFuFRcKh+9mkkfF7Bi2S24e1mbh9aehD2obmGSIw0lL8YdQUwExcTxhuZ8u7o9bbpGcsAIDIUUuojpWuhI/nHRR/PF2Oxn/WXFS1WBGXwuxAuJhvLVkuXKpdIiJvnS/DVNvM35a8TIe9HlH54Kyas=
        # $GIT_ACCESS_TOKEN Allows bumping version on build and pushing back to repo
        - secure: EEqYRnY/HyLuqFB1rRG/fFTyXyPeD9jHNN5SYs2O8CeUxVjVB5Gj3jkuMn0jaYIZzsVmFwOHDg9+d620XQrkmUUiZ75+CSwoq59oFvVY/8ZcQNzICtUZ3tmLNRKgS8YiwI6zoFi+lwMBZidgyNYbEYhyWV0CS3yam3BxGFkqqLvG1h1zwq1R2IRVpqz2nyIuHZwSicT4mOnZHUZNc/KIR2IahYjWsNVB3AdL+VU9cKU8rLbJN6HlETLpWDUkNPMcEx5mfQwkYrgzJXkWvzpTOmpaPlODT9grpcUDTn1ebZd2PcazdyB98N71jVuVDgOFe+sb7NHIFmAVI74lDUj34AWiGnB9akU92I/ynvVVAvijNa8ViWkeMBQxvNCQHdLJeXBdcr5DMeCmU9mNd4SpWRvBXeosX4onJdhunIttn+dok0fw5AlE86SwR1m2gT+Lnjcu0KGj/00vcwC9SPOT2AgOBpdY0OylpjY/C2oXpIBUwrN1dlv1cmc4ZAIFQVkuJnXe9Ol/eCAOKLf6YJ0t76MRMODP03KsYSBb98K15PsqZwrgaf/FKBbGuYDudLkOR09YLgOIZzbzc2DXD7mIFMvALhieup3sEYoofuiZEe9zWEq/7b5drSERgpQ8P2YrQ1aidqH/H+x+pk8SRhjkjXToxCaFZIM352I85bmUBng=
